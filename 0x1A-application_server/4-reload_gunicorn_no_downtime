#!/usr/bin/env bash
# Get the process ID of the Gunicorn master process
PID=$(cat /usr/bin/gunicorn.pid)

# Send a HUP signal to the Gunicorn master process to initiate a graceful reload
kill -HUP $PID

# Wait for the new workers to start up
sleep 5

# Check if the new workers are running
if ! kill -0 $PID 2>/dev/null; then
  echo "Reloading Gunicorn failed. Check the logs for more information."
else
  echo "Gunicorn reloaded successfully."
fi

